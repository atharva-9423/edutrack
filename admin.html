
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Admin Panel - EduTrack</title>
    <link href="style.css" rel="stylesheet" />
    <link href="admin-style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Firebase CDN Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  </head>
  <body>
    <div class="toast-container" id="toast-container"></div>

    <!-- Admin Login Page -->
    <div id="admin-login" class="admin-page active">
      <div class="admin-login-container">
        <h1 class="admin-title">
          Admin Panel<br />
          <span class="highlight">EduTrack</span>
        </h1>
        <p class="admin-subtitle">Enter admin credentials to continue</p>
        <form class="admin-login-form" onsubmit="handleAdminLogin(event)">
          <div class="form-group">
            <label for="admin-username">Username</label>
            <input
              type="text"
              id="admin-username"
              class="form-input"
              placeholder="Enter admin username"
              autocomplete="off"
            />
          </div>
          <div class="form-group">
            <label for="admin-password">Password</label>
            <input
              type="password"
              id="admin-password"
              class="form-input"
              placeholder="Enter admin password"
            />
          </div>
          <button type="submit" class="btn-primary btn-submit">
            Login
            <div class="icon">
              <svg
                height="24"
                width="24"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"
                  fill="currentColor"
                ></path>
              </svg>
            </div>
          </button>
        </form>
      </div>
    </div>

    <!-- Admin Dashboard - Main Menu -->
    <div id="admin-dashboard" class="admin-page">
      <header class="app-header">
        <h2 class="page-title">Admin Panel</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <div class="admin-menu-grid">
          <div class="admin-menu-card" onclick="goToAdminPage('schedule-manager')">
            <div class="menu-icon">üìö</div>
            <div class="menu-title">Set Schedules</div>
            <div class="menu-description">Manage division schedules and timetables</div>
          </div>

          <div class="admin-menu-card" onclick="goToAdminPage('post-notice')">
            <div class="menu-icon">üì¢</div>
            <div class="menu-title">Post Notice</div>
            <div class="menu-description">Send notices and announcements to students</div>
          </div>

          <div class="admin-menu-card" onclick="goToAdminPage('post-holiday')">
            <div class="menu-icon">üéâ</div>
            <div class="menu-title">Post Holiday</div>
            <div class="menu-description">Manage college holidays and breaks</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Post Notice Page -->
    <div id="post-notice" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="goToAdminPage('admin-dashboard')">
          ‚Üê Back
        </button>
        <h2 class="page-title">Post Notice</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <button class="btn-add-notice" onclick="openNoticeModal()">
          <span style="font-size: 24px; margin-right: 8px;">+</span> Create Notice
        </button>

        <div class="section-header" style="margin-top: 30px;">
          <h3>Posted Notices</h3>
        </div>
        <div class="notices-list" id="noticesList"></div>
      </div>
    </div>

    <!-- Post Holiday Page -->
    <div id="post-holiday" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="goToAdminPage('admin-dashboard')">
          ‚Üê Back
        </button>
        <h2 class="page-title">Post Holiday</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <button class="btn-add-notice" onclick="openHolidayModal()">
          <span style="font-size: 24px; margin-right: 8px;">+</span> Create Holiday
        </button>

        <div class="section-header" style="margin-top: 30px;">
          <h3>Posted Holidays</h3>
        </div>
        <div class="notices-list" id="holidaysList"></div>
      </div>
    </div>

    <!-- Schedule Manager - Division Cards -->
    <div id="schedule-manager" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="goToAdminPage('admin-dashboard')">
          ‚Üê Back
        </button>
        <h2 class="page-title">Set Schedules</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <div class="section-header">
          <h3>Select Division</h3>
        </div>
        <div class="division-grid" id="divisionGrid"></div>
      </div>
    </div>

    <!-- Division Detail Page - Subjects Management -->
    <div id="division-detail" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="goToAdminPage('schedule-manager')">
          ‚Üê Back
        </button>
        <h2 class="page-title" id="divisionTitle">Division A</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <div class="section-header">
          <h3>Subjects & Teachers</h3>
          <button class="btn-add-small" onclick="openSubjectModal()">
            + Add Subject
          </button>
        </div>
        <div class="subjects-list" id="subjectsList"></div>

        <button class="btn-add-schedule" onclick="goToScheduleSetup()">
          Add Schedule
        </button>
      </div>
    </div>

    <!-- Day Selection Page -->
    <div id="day-selection" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="backToDivisionDetail()">
          ‚Üê Back
        </button>
        <h2 class="page-title">Select Day</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <div class="day-grid" id="dayGrid"></div>
      </div>
    </div>

    <!-- Day Schedule Page -->
    <div id="day-schedule" class="admin-page">
      <header class="app-header">
        <button class="btn-back" onclick="goToAdminPage('day-selection')">
          ‚Üê Back
        </button>
        <h2 class="page-title" id="dayScheduleTitle">Monday Schedule</h2>
        <button class="btn-logout" onclick="handleAdminLogout()">
          Logout
        </button>
      </header>

      <div class="container">
        <button class="btn-add-schedule" onclick="openTimeSlotModal()">
          + Add Schedule
        </button>

        <div class="schedule-timeline" id="scheduleTimeline"></div>
      </div>
    </div>

    <!-- Subject Modal -->
    <div class="modal-overlay" id="subjectModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Add Subject</h3>
          <button class="modal-close" onclick="closeSubjectModal()">‚úï</button>
        </div>
        <form class="modal-form" onsubmit="handleSubjectSubmit(event)">
          <div class="form-group">
            <label for="subject-name">Subject Name</label>
            <input
              type="text"
              id="subject-name"
              class="form-input"
              placeholder="e.g., Mathematics"
              required
            />
          </div>

          <div class="form-group">
            <label for="subject-teacher">Teacher Name</label>
            <input
              type="text"
              id="subject-teacher"
              class="form-input"
              placeholder="e.g., Dr. Smith"
              required
            />
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn modal-btn-cancel"
              onclick="closeSubjectModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn modal-btn-confirm">
              Add Subject
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Time Slot Modal -->
    <div class="modal-overlay" id="timeSlotModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Add Time Slot</h3>
          <button class="modal-close" onclick="closeTimeSlotModal()">‚úï</button>
        </div>
        <form class="modal-form" onsubmit="handleTimeSlotSubmit(event)">
          <div class="form-group">
            <label for="slot-start-time">Start Time</label>
            <input
              type="time"
              id="slot-start-time"
              class="form-input"
              required
            />
          </div>

          <div class="form-group">
            <label for="slot-end-time">End Time</label>
            <input
              type="time"
              id="slot-end-time"
              class="form-input"
              required
            />
          </div>

          <div class="form-group">
            <label for="slot-subject">Subject</label>
            <select id="slot-subject" class="form-input" required>
              <option value="">Select Subject</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slot-color">Card Color</label>
            <select id="slot-color" class="form-input" required>
              <option value="">Select Color</option>
              <option value="purple">Purple (Default)</option>
              <option value="green">Green</option>
              <option value="red">Red (Lunch Break)</option>
            </select>
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn modal-btn-cancel"
              onclick="closeTimeSlotModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn modal-btn-confirm">
              Add Time Slot
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Holiday Modal -->
    <div class="modal-overlay" id="holidayModal">
      <div class="modal modal-large">
        <div class="modal-header">
          <h3>Create Holiday</h3>
          <button class="modal-close" onclick="closeHolidayModal()">‚úï</button>
        </div>
        <form class="modal-form" onsubmit="handleHolidaySubmit(event)">
          <div class="form-group">
            <label for="holiday-name">Holiday Name</label>
            <input
              type="text"
              id="holiday-name"
              class="form-input"
              placeholder="Enter holiday name"
              required
            />
          </div>

          <div class="form-group">
            <label for="holiday-start-date">Start Date</label>
            <input
              type="date"
              id="holiday-start-date"
              class="form-input"
              required
            />
          </div>

          <div class="form-group">
            <label for="holiday-end-date">End Date (Optional)</label>
            <input
              type="date"
              id="holiday-end-date"
              class="form-input"
            />
            <small style="color: var(--text-secondary); font-size: 13px; margin-top: 5px; display: block;">
              Leave empty if holiday is only for one day
            </small>
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn modal-btn-cancel"
              onclick="closeHolidayModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn modal-btn-confirm">
              Post Holiday
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Notice Modal -->
    <div class="modal-overlay" id="noticeModal">
      <div class="modal modal-large">
        <div class="modal-header">
          <h3>Create Notice</h3>
          <button class="modal-close" onclick="closeNoticeModal()">‚úï</button>
        </div>
        <form class="modal-form" onsubmit="handleNoticeSubmit(event)">
          <div class="form-group">
            <label for="notice-title">Notice Title</label>
            <input
              type="text"
              id="notice-title"
              class="form-input"
              placeholder="Enter notice title"
              required
            />
          </div>

          <div class="form-group">
            <label for="notice-content">Notice Content</label>
            <textarea
              id="notice-content"
              class="form-input"
              placeholder="Write your notice here..."
              rows="6"
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="notice-attachment">Attach Image/File (Optional)</label>
            <input
              type="file"
              id="notice-attachment"
              class="form-input"
              accept="image/*,.pdf,.doc,.docx"
            />
            <small style="color: var(--text-secondary); font-size: 13px; margin-top: 5px; display: block;">
              Supported: Images, PDF, DOC files (Max 5MB)
            </small>
          </div>

          <div class="form-group">
            <label for="notice-priority">Priority</label>
            <select id="notice-priority" class="form-input" required>
              <option value="">Select Priority</option>
              <option value="normal">Normal - Bell notification only</option>
              <option value="holiday">Holiday - Show popup with pleasant colors</option>
              <option value="urgent">Urgent - Show important popup</option>
            </select>
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn modal-btn-cancel"
              onclick="closeNoticeModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn modal-btn-confirm">
              Post Notice
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="admin-script.js"></script>
  </body>
</html>
